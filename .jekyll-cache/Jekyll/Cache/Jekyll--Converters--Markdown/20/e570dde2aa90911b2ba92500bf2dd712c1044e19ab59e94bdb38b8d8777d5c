I" &<blockquote>
  <p>ä¸€ä¸‹åˆçš„æ—¶å…‰ï¼Œåªä¸ºå†™å‡ºä¸€ä¸ª@Autowired ğŸ˜­</p>
</blockquote>

<p>è¯¾ç¨‹æ¥è‡ªä¹ä¼˜å•†åŸ2018-11æœŸï¼Œspringcloudçš„ç¬¬ä¸€ä¸ªdemo</p>

<p><strong>éœ€æ±‚</strong>ï¼šç”¨é€šç”¨mapperå®ç°æ•°æ®åº“çš„æŸ¥è¯¢ï¼ˆä»¥ä¸‹ä»£ç çœç•¥çš„packageå’Œimportéƒ¨åˆ†ï¼‰</p>

<ul>
  <li>
    <p>ç›®å½•ç»“æ„ï¼ˆå…¥å£æ–‡ä»¶ä¸€å®šè¦å’ŒcontrolleråŒçº§ï¼Œä¸ç„¶mapperæ‰«æä¸åˆ°ï¼‰
<img src="https://i.loli.net/2019/07/18/5d3056821b35512587.png" alt="" /></p>
  </li>
  <li>application.yml
    <div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="na">server</span><span class="pi">:</span>
<span class="na">port</span><span class="pi">:</span> <span class="m">8081</span>
<span class="na">spring</span><span class="pi">:</span>
<span class="na">datasource</span><span class="pi">:</span>
  <span class="na">url</span><span class="pi">:</span> <span class="s">jdbc:mysql://127.0.0.1:3306/mybatis</span>
  <span class="na">username</span><span class="pi">:</span> <span class="s">root</span>
  <span class="na">password</span><span class="pi">:</span> <span class="s">root</span>
  <span class="na">driver-class-name</span><span class="pi">:</span> <span class="s">com.mysql.jdbc.Driver</span>
<span class="na">mybatis</span><span class="pi">:</span>
<span class="na">type-aliases-package</span><span class="pi">:</span> <span class="s">com.itcast.service.pojo</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>ItcastServiceProviderApplication.class</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="nd">@MapperScan</span><span class="o">(</span> <span class="n">basePackages</span> <span class="o">=</span> <span class="s">"com.itcast.service.mapper"</span><span class="o">)</span>  <span class="c1">//æ­¤å¤„æ‰«æmapperï¼Œä¸€å®šè¦å¡«å¯¹ä½ç½®ã€‚mapperç±»å°±ä¸ç”¨åŠ äº†</span>
<span class="nd">@SpringBootApplication</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ItcastServiceProviderApplication</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="nc">ItcastServiceProviderApplication</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
	<span class="o">}</span>

<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>pojo User.class</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="nd">@Data</span>   <span class="c1">//lombok å¯çœç•¥getter,setteræ–¹æ³•</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"tb_user"</span><span class="o">)</span>    <span class="c1">//æ•°æ®åº“è¡¨å</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="kd">implements</span> <span class="nc">Serializable</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@KeySql</span><span class="o">(</span><span class="n">useGeneratedKeys</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>    <span class="c1">//id ä¸»é”®</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">username</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">phone</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">password</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">salt</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">created</span><span class="o">;</span>

<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>mapper UserMapper</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">itcast</span><span class="o">.</span><span class="na">service</span><span class="o">.</span><span class="na">mapper</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.itcast.service.pojo.User</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">tk.mybatis.mapper.common.Mapper</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="kd">extends</span> <span class="nc">Mapper</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;{</span> <span class="c1">//ç»§æ‰¿Mapperï¼ˆè¿™æ˜¯éœ€è¦è¢«æ‰«æåˆ°çš„mapperï¼‰æ³›å‹ä¸ºpojo Userç±»</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>service UserService</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserService</span> <span class="o">{</span>

    <span class="nd">@Autowired</span>
    <span class="kd">public</span> <span class="nc">UserMapper</span> <span class="n">userMapper</span><span class="o">;</span>   <span class="err">æ­¤å¤„å¯èƒ½ä¼šæŠ¥æ²¡æœ‰è¿™ä¸ª</span><span class="n">Bean</span><span class="err">çš„é”™ï¼Œä¸è¦ç†å®ƒ</span>

    <span class="kd">public</span> <span class="nc">User</span> <span class="nf">queryUserById</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">){</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">userMapper</span><span class="o">.</span><span class="na">selectByPrimaryKey</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>controller UserController</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/user"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserController</span> <span class="o">{</span>

    <span class="nd">@Autowired</span>    
    <span class="kd">public</span> <span class="nc">UserService</span> <span class="n">userService</span><span class="o">;</span>

    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"{id}"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">User</span> <span class="nf">queryUserById</span><span class="o">(</span><span class="nd">@PathVariable</span><span class="o">(</span><span class="s">"id"</span><span class="o">)</span><span class="kt">int</span> <span class="n">id</span><span class="o">){</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">userService</span><span class="o">.</span><span class="na">queryUserById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<ul>
  <li><strong>æ³¨æ„ä¸Šè¿°çš„@Autowired,è€å¸ˆæ²¡æœ‰åŠ ã€‚æˆ‘æœ€å¼€å§‹æ˜¯æ²¡æœ‰åŠ çš„ï¼Œä½†æ˜¯æ‰“å°å‡ºæ¥userServiceå§‹ç»ˆä¸ºnullã€‚è¯´æ˜å§‹ç»ˆæœªæ³¨å…¥ï¼Œæ‰€ä»¥ï¼ŒåŠ å…¥æ­¤æ³¨è§£ã€‚æˆåŠŸï¼</strong></li>
</ul>

<h4 id="æ€»ç»“">æ€»ç»“</h4>
<p>é€šè¿‡ä¸Šè¿°ä¸€ä¸ªç®€å•çš„demoï¼Œè‡ªå·±å¯¹springbootçš„è¿è¡Œå‘¨æœŸæœ‰äº†ä¸€ä¸ªæ¯”è¾ƒæ¸…æ¥šçš„äº†è§£ï¼Œå¦‚ä¸‹å›¾
<img src="https://i.loli.net/2019/07/18/5d305b71cf62d74937.png" alt="" />
å¯èƒ½ä¼šæœ‰äº›é”™è¯¯ï¼Œä½†è‡ªå·±æ°´å¹³ç›®å‰åªèƒ½ç†è§£åˆ°è¿™é‡Œäº†ã€‚</p>

<p><strong>å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´</strong>ï¼Œä¹‹å‰çœ‹äº†å¥½å‡ éè§†é¢‘ï¼Œæ€»è§‰å¾—å¾ˆeasyï¼Œå¯å½“çœŸä¸Šæ‰‹äº†å°±å„ç§é—®é¢˜å‡ºç°ã€‚</p>

<p><strong>ä¸€å®šè¦å¤šåŠ¨æ‰‹å•Šï¼ï¼ï¼ï¼ï¼ï¼ï¼</strong></p>
:ET